


ARM Macro Assembler    Page 1 


    1 00000000                 AREA             text, CODE, READONLY
    2 00000000                 export           asm_variance ; label must be ex
                                                            ported if it is to 
                                                            be used as a functi
                                                            on in C
    3 00000000         
    4 00000000         ; The subroutine for variance calculation
    5 00000000         ; R0 holds the base address of the vector
    6 00000000         ; R1 holds the size of the vector, which is used as the 
                       counter
    7 00000000         ; R2 holds the address of the result
    8 00000000         
    9 00000000         asm_variance
   10 00000000 460B            MOV              R3, R1      ; R3 holds the valu
                                                            e of the counter, a
                                                            s a backup
   11 00000002 B402            PUSH             {R1}
   12 00000004 B401            PUSH             {R0}        ; Back up the base 
                                                            address
   13 00000006 ED90 0A00       VLDR.f32         S0, [R0]
   14 0000000A EDD0 0A00       VLDR.f32         S1, [R0]
   15 0000000E EA4F 0181       LSL              R1, R1, #2  ; Convert the count
                                                            er to word size
   16 00000012 F04F 0400       MOV              R4, #0
   17 00000016 EE02 4A10       VMOV.f32         S4, R4      ; Initialize S4 to 
                                                            hold the temporary 
                                                            sum
   18 0000001A EEB8 2A42       VCVT.f32.u32     S4, S4      ; Convert it to flo
                                                            at 
   19 0000001E         
   20 0000001E         AVERAGE
   21 0000001E 1F09            SUBS             R1, R1, #4  ; Decrement the cou
                                                            nter
   22 00000020 DB06            BLT              VARIANCE_PRE ; Branch out if co
                                                            unter value drops b
                                                            elow 0
   23 00000022 EE32 2A00       VADD.f32         S4, S4, S0  ; Sum up
   24 00000026 F100 0004       ADD              R0, R0, #4
   25 0000002A ED90 0A00       VLDR.f32         S0, [R0]    ; Now S0 holds the 
                                                            value of the next n
                                                            umber in the array
   26 0000002E E7F6            B                AVERAGE
   27 00000030         
   28 00000030         VARIANCE_PRE
   29 00000030 EE02 3A90       VMOV.f32         S5, R3      ; Initialize S5 to 
                                                            hold the size of th
                                                            e array
   30 00000034 EEF8 2A62       VCVT.f32.u32     S5, S5      ; Convert it to flo
                                                            at
   31 00000038 EE82 2A22       VDIV.f32         S4, S4, S5  ; S4 holds the aver
                                                            age
   32 0000003C EA4F 0383       LSL              R3, R3, #2
   33 00000040 BC01            POP{R0}
   34 00000042         
   35 00000042         VARIANCE
   36 00000042 1F1B            SUBS             R3, R3, #4
   37 00000044 DB0A            BLT              VARIANCE_POST
   38 00000046 EE30 3AC2       VSUB.f32         S6, S1, S4
   39 0000004A EE23 3A03       VMUL.f32         S6, S6, S6



ARM Macro Assembler    Page 2 


   40 0000004E EE73 3A83       VADD.f32         S7, S7, S6
   41 00000052         
   42 00000052 F100 0004       ADD              R0, R0, #4
   43 00000056 EDD0 0A00       VLDR.f32         S1, [R0]
   44 0000005A E7F2            B                VARIANCE
   45 0000005C         
   46 0000005C         VARIANCE_POST
   47 0000005C BC02            POP              {R1}
   48 0000005E F1A1 0101       SUB              R1, R1, #1
   49 00000062 EE00 1A10       VMOV.f32         S0, R1
   50 00000066 EEB8 0A40       VCVT.f32.u32     S0, S0
   51 0000006A EEC3 3A80       VDIV.f32         S7, S7, S0
   52 0000006E         
   53 0000006E         DONE
   54 0000006E EDC2 3A00       VSTR             S7, [R2]
   55 00000072         
   56 00000072 4770            BX               LR
   57 00000074         
   58 00000074                 END
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M4.fp --apcs=int
erwork --depend=.\objects\asm_variance.d -o.\objects\asm_variance.o -IP:\ECSE44
4\GXX_Lab1\RTE -IC:\Keil_v5\ARM\PACK\ARM\CMSIS\5.3.0\CMSIS\Include -IC:\Keil_v5
\ARM\PACK\ARM\CMSIS\5.3.0\Device\ARM\ARMCM4\Include --predefine="__EVAL SETA 1"
 --predefine="__UVISION_VERSION SETA 515" --predefine="_RTE_ SETA 1" --predefin
e="ARMCM4_FP SETA 1" --list=.\listings\asm_variance.lst asm\asm_variance.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

AVERAGE 0000001E

Symbol: AVERAGE
   Definitions
      At line 20 in file asm\asm_variance.s
   Uses
      At line 26 in file asm\asm_variance.s
Comment: AVERAGE used once
DONE 0000006E

Symbol: DONE
   Definitions
      At line 53 in file asm\asm_variance.s
   Uses
      None
Comment: DONE unused
VARIANCE 00000042

Symbol: VARIANCE
   Definitions
      At line 35 in file asm\asm_variance.s
   Uses
      At line 44 in file asm\asm_variance.s
Comment: VARIANCE used once
VARIANCE_POST 0000005C

Symbol: VARIANCE_POST
   Definitions
      At line 46 in file asm\asm_variance.s
   Uses
      At line 37 in file asm\asm_variance.s
Comment: VARIANCE_POST used once
VARIANCE_PRE 00000030

Symbol: VARIANCE_PRE
   Definitions
      At line 28 in file asm\asm_variance.s
   Uses
      At line 22 in file asm\asm_variance.s
Comment: VARIANCE_PRE used once
asm_variance 00000000

Symbol: asm_variance
   Definitions
      At line 9 in file asm\asm_variance.s
   Uses
      At line 2 in file asm\asm_variance.s
Comment: asm_variance used once
text 00000000

Symbol: text
   Definitions
      At line 1 in file asm\asm_variance.s
   Uses
      None
Comment: text unused
7 symbols
342 symbols in table
